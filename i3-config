#
## https://github.com/lennypeers/dotfiles
#

## At boot: Volume at 20% but muted, solid background
#
exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ 20%
exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ 1
exec --no-startup-id hsetroot -solid $BGG

## Keys var, (in doubt run xmodmap)
#
set $mod Mod4
set $altgr Mod5
set $alt Mod1

## Font
#
font : Noto Mono 11

## Volume bindkeys
## TODO: write a script
#
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5% && notify-send 'Volume' "Set to $(pactl list sinks | grep -m 1 \%\ \/ | cut -d \/ -f 2 | sed s/\ //g)" -h string:x-canonical-private-synchronous:anything -a notif

bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5% && notify-send 'Volume' "Set to $(pactl list sinks | grep -m 1 \%\ \/ | cut -d \/ -f 2 | sed s/\ //g)" -h string:x-canonical-private-synchronous:anything -a notif

bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle

bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle

## Use Mouse+$mod to drag floating windows to their wanted position
#
floating_modifier $mod

## Start a terminal
#
bindsym ctrl+Shift+Return exec termite

## Kill focused window
#
bindsym ctrl+Shift+q kill

## Start Rofi
#
bindsym Ctrl+space exec rofi -show run

## Resize stuff
#
bindsym ctrl+Shift+$alt+Left resize shrink left 5
bindsym ctrl+Shift+$alt+Down resize shrink down 5
bindsym ctrl+Shift+$alt+Up resize shrink up 5
bindsym ctrl+Shift+$alt+Right resize shrink right 5

bindsym ctrl+Shift+$altgr+Left resize grow left 5
bindsym ctrl+Shift+$altgr+Down resize grow down 5
bindsym ctrl+Shift+$altgr+Up resize grow up 5
bindsym ctrl+Shift+$altgr+Right resize grow right 5

## Moving windows
#
bindsym ctrl+Shift+Left move left
bindsym ctrl+Shift+Down move down
bindsym ctrl+Shift+Up move up
bindsym ctrl+Shift+Right move right

## Enter fullscreen mode for the focused container
#
bindsym XF86LaunchB fullscreen toggle

## Toggle tiling / floating
#
bindsym ctrl+Shift+space floating toggle

## Workspaces
#
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

## Switch to workspace
#
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

## Move focused container to workspace
#
bindsym ctrl+Shift+1 move container to workspace number $ws1
bindsym ctrl+Shift+2 move container to workspace number $ws2
bindsym ctrl+Shift+3 move container to workspace number $ws3
bindsym ctrl+Shift+4 move container to workspace number $ws4
bindsym ctrl+Shift+5 move container to workspace number $ws5
bindsym ctrl+Shift+6 move container to workspace number $ws6
bindsym ctrl+Shift+7 move container to workspace number $ws7
bindsym ctrl+Shift+8 move container to workspace number $ws8
bindsym ctrl+Shift+9 move container to workspace number $ws9
bindsym ctrl+Shift+0 move container to workspace number $ws10

## Reload the configuration file
#
bindsym $mod+Shift+c reload

## Restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
#
bindsym $mod+Shift+r restart

## Resize window (you can also use the mouse for that)
#
mode "resize" {
	bindsym j resize shrink width 10 px or 10 ppt
	bindsym k resize grow height 10 px or 10 ppt
	bindsym l resize shrink height 10 px or 10 ppt
	bindsym semicolon resize grow width 10 px or 10 ppt

	bindsym Left resize shrink width 10 px or 10 ppt
	bindsym Down resize grow height 10 px or 10 ppt
	bindsym Up resize shrink height 10 px or 10 ppt
	bindsym Right resize grow width 10 px or 10 ppt

	bindsym Return mode "default"
	bindsym Escape mode "default"
	bindsym $mod+r mode "default"
}

## Enter in resize mode
#
bindsym $mod+r mode "resize"

## Bar conf, using polybar
#
bar {
	i3bar_command ~/dotfiles/polybar/launch.sh
	position top
}


## Screen brightness control
#
bindsym XF86MonBrightnessUp exec notify-send Brightness "$(macbook-lighter-screen --inc 25)" -h string:x-canonical-private-synchronous:anything -a notif

bindsym XF86MonBrightnessDown exec notify-send Brightness "$(macbook-lighter-screen --dec 25)" -h string:x-canonical-private-synchronous:anything -a notif

## Keyboard backlight controls
#
bindsym XF86KbdBrightnessUp exec notify-send Backlight "$(macbook-lighter-kbd --inc 25)" -h string:x-canonical-private-synchronous:anything -a notif

bindsym XF86KbdBrightnessDown exec notify-send Backlight "$(macbook-lighter-kbd --dec 25)" -h string:x-canonical-private-synchronous:anything -a notif

## remove the title bar :)
#
new_window 1pixel

## alt tab like stuff
#
bindsym ctrl+Shift+Tab workspace prev
bindsym ctrl+Tab workspace next

## Set inner/outer gaps
#
gaps inner 20
gaps outer -2
gaps top 40
default_border pixel 0
#smart_borders on
#smart_gaps inverse_outer

## Edit gap on the go
#
bindsym	$mod+plus exec i3-msg -q gaps inner current plus 2
bindsym	$mod+minus exec i3-msg -q gaps inner current minus 2
bindsym	$mod+Shift+plus exec i3-msg -q gaps outer current plus 2
bindsym	$mod+Shift+minus exec i3-msg -q gaps outer current minus 2

## Firefox
#
bindsym --release $mod+Tab exec --no-startup-id xdotool search --name Mozilla key Ctrl+Tab
bindsym --release $mod+Shift+Tab exec --no-startup-id xdotool search --name Mozilla key Ctrl+Shift+Tab
bindsym --release $altgr+Left exec --no-startup-id xdotool search --name Mozilla key Alt+Left
bindsym  --release $altgr+Right exec --no-startup-id xdotool search --name Mozilla key Alt+Right

## Screenshots
#
bindsym F3 exec --no-startup-id ~/dotfiles/scripts/screenshot.sh -w
bindsym Shift+F3 exec --no-startup-id ~/dotfiles/scripts/screenshot.sh -a
bindsym --release XF86LaunchA exec ~/dotfiles/scripts/screenshot.sh -s

## Hide polybar
#
bindsym XF86Eject exec bash -c "grep 1 /tmp/polybar_status && /home/lenny/dotfiles/scripts/togglebar.sh hide || /home/lenny/dotfiles/scripts/togglebar.sh show"

## Exit
#
bindsym shift+F12 exec i3-msg exit

## Global rules
#
for_window [class=".*"] split toggle
for_window [class="firefox"] move container to workspace 1
for_window [class="discord"] move container to workspace 5
for_window [class="Termite"] move container to workspace 3
for_window [class="Zathura"] move container to workspace 4
for_window [class="Brave-browser"] move container to workspace 2
for_window [class="libreoffice-writter"] move container to workspace 8
for_window [class=".*"] border pixel 1
for_window [class="Zathura"] border pixel 0
for_window [class="Discord"] gaps inner 40

## Colors
#
set $border \#9ba2b0

# class                 border  backgr. text    indicator child_border
client.focused          $border $border #282828 $border   $border
client.focused_inactive $border $border #282828 $border   $border
client.unfocused        $border $border #282828 $border   $border
client.urgent           $border $border #282828 $border   $border
client.placeholder      $border $border #282828 $border   $border
client.background       #282828
